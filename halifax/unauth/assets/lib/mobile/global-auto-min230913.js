String.prototype.clean=function(){var regExp=new RegExp("\n\r\t","g");return this.replace(regExp," ");};if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};}var $=$||(function(w,d){var collection=(function(){function collection(items,selector){if(!(items instanceof Array)){items=[items];}this.items=items;this.selector=selector;}collection.prototype.each=function(func){for(var i=0;i<this.items.length;i++){var res=func.apply(this.items[i],[this.items[i],i]);if(false===res){break;}}return this;};collection.prototype.map=function(func){var res=[];this.each(function(){res.push(func(this));});return res;};collection.prototype.length=function(){return this.items.length;};collection.prototype.exists=function(){return this.items.length>0;};collection.prototype.one=collection.prototype.first=function(){return $(this.items[0]);};collection.prototype.bind=function(event,handler){return this.each(function(){if(this.addEventListener){this.addEventListener(event,handler);}else{if(this.attachEvent){this.attachEvent("on"+event,handler);}}});};collection.prototype.trigger=function(event){return this.each(function(){if(!this.fireEvent){var type=Event;switch(event){case"click":case"mousedown":case"mouseup":case"mouseover":case"mouseout":type=MouseEvent;break;}if(window[type]!=undefined){var evt=new type(event);}else{var params=params||{bubbles:false,cancelable:false,detail:undefined};var evt=document.createEvent("CustomEvent");evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);}this.dispatchEvent(evt);}else{this.fireEvent("on"+event);}});};collection.prototype.click=function(handler){return undefined!==handler?this.bind("click",handler):this.trigger("click");};collection.prototype.focus=function(){this.items[0].focus();return this;};collection.prototype.html=function(val){if(undefined==val){var content="";this.each(function(){content+=this.innerHTML;});return content;}this.each(function(){this.innerHTML=val;});return this;};collection.prototype.insertAfter=function(element){element=$(element);element.items[0].parentNode.insertBefore(this.items[0],element.items[0].nextSibling);return this;};collection.prototype.insertBefore=function(element){element=$(element);element.items[0].parentNode.insertBefore(this.items[0],element.items[0]);return this;};collection.prototype.text=function(val){if(val){return this.html(val);}return this.html().replace(/<\/?[A-Za-z]+(?:[A-Za-z\s="'\{\}\:]+)*>/g," ");};collection.prototype.attr=function(key,val){if(key&&this.items[0][key]){if(!val){return this.items[0][key];}this.items[0][key]=val;}return this;};collection.prototype.hasClass=function(className){var res=false;this.each(function(){var names=this.className.split(" ");for(var i in names){if(names.hasOwnProperty(i)&&className==names[i]){res=true;return false;}}});return res;};collection.prototype.addClass=function(className){return this.each(function(){if(!$(this).hasClass(className)){this.className=(this.className+" "+className).trim();}});};collection.prototype.removeClass=function(className){return this.each(function(){this.className=this.className.replace(className,"");});};collection.prototype.hide=function(){return this.each(function(){this.style.display="none";});};collection.prototype.show=function(){return this.each(function(){this.style.display="";});};collection.prototype.remove=function(){this.each(function(){this.parentNode.removeChild(this);});};collection.prototype.prepend=function(elem){return this.each(function(){this.appendChild(elem);this.insertBefore(elem,this.firstChild);});};collection.prototype.val=function(){var instance=this.one();if(instance){return instance.items[0].value;}return undefined;};return collection;})();function $(selector,context){if(selector instanceof HTMLElement){return new collection(selector);}else{if(selector instanceof collection&&context==undefined){return selector;}}var base=context||d;if(!(base instanceof collection)){base=new collection(base);}var result=[];base.each(function(item){var item_type=typeof selector;if(item_type==="string"){result.push.apply(result,item.querySelectorAll(selector));}});var res=new collection(result);return res;}$.ajax=function(obj){var method=obj.method||"GET",url=obj.url||"",handlers={loading:obj.loading,success:obj.success,failure:obj.failure},httpRequest=null;if(window.XMLHttpRequest){httpRequest=new XMLHttpRequest();}else{if(window.ActiveXObject){try{httpRequest=new ActiveXObject("Msxml2.XMLHTTP");}catch(e){try{httpRequest=new ActiveXObject("Microsoft.XMLHTTP");}catch(e){}}}}if(!httpRequest){return false;}httpRequest.onreadystatechange=function(){if(httpRequest.readyState<4){if(handlers.loading){handlers.loading.call(httpRequest);}}else{if(4==httpRequest.readyState){if(200==httpRequest.status){if(handlers.success){handlers.success.call(httpRequest,httpRequest.responseText);}}else{if(handlers.failure){handlers.failure.call(httpRequest,httpRequest.responseText);}}}}};httpRequest.open(method,url);httpRequest.send();};return $;})(window,document);(function(){if(!Array.prototype.each){Array.prototype.each=function(func){for(var k in this){if(false===func.call(this[k],k,this[k])){break;}}return this;};}})();var LBGM=window.LBGM||{};LBGM.browserFeatures=window.LBGM.browserFeatures||{};LBGM.browserFeatures.supported=false;LBGM.browserFeatures.sniff=function(){if(document.querySelectorAll||window.json){LBGM.browserFeatures.supported=true;}};LBGM.events={trigger:function(eventName,element){var event;if(document.createEvent){event=document.createEvent("HTMLEvents");event.initEvent(eventName,true,true);}else{event=document.createEventObject();event.eventType="on"+eventName;}if(document.createEvent){element.dispatchEvent(event);}else{element.fireEvent(event.eventType,event);}}};LBGM.tools=window.LBGM.tools||{};LBGM.tools.addHasJSClass=function(){this.addClass(document.querySelector("body"),"hasJS");};LBGM.tools.hasClass=function(element,className){if(element.nodeType!==1){return false;}var myClassName=" "+element.className.clean()+" ";return myClassName.indexOf(" "+className.clean()+" ")!==-1;};LBGM.tools.addClass=function(element,className){if(!this.hasClass(element,className)){element.className=(element.className+" "+className).trim();}};LBGM.tools.removeClass=function(element,className){if(this.hasClass(element,className)){var myClassName=element.className.replace(className,"");myClassName=myClassName.replace("  "," ");element.className=myClassName;}};LBGM.tools.insertAfter=function(referenceNode,newNode){referenceNode.parentNode.insertBefore(newNode,referenceNode.nextSibling);};LBGM.tools.firstChild=function(referenceNode){var firstChild=referenceNode.firstChild;while(firstChild!==null&&firstChild.nodeType===3){firstChild=firstChild.nextSibling;}return firstChild;};LBGM.preventDuplicateFormSubmission={init:function(){this.setForm();},setForm:function(){var formElements=document.getElementsByTagName("form"),formElementSize=formElements.length,i=0;for(i;i<formElementSize;i++){formElements[i].addEventListener("submit",LBGM.preventDuplicateFormSubmission.submitOnceDisableClick,false);}},submitOnceDisableClick:function(e){if(LBGM.tools.hasClass(this,"isDisabled")){e.preventDefault();return false;}LBGM.tools.addClass(this,"isDisabled");return true;}};LBGM.accordion={init:function(){var i;this.openText="Show more";this.closeText="Show less";this.closeClass="hide";this.accordionList=document.querySelectorAll(".accordion");this.accordionLength=this.accordionList.length;
if(this.accordionLength>0){for(i=0;i<this.accordionLength;i++){LBGM.accordion.setAccordion(LBGM.accordion.accordionList[i].querySelectorAll("ol > li"));}}},setAccordion:function(moreDetailElementList){var moreDetailElementSize=moreDetailElementList.length,icon=document.createElement("div"),i;for(i=0;i<moreDetailElementSize;i++){var currentElement=moreDetailElementList[i],accordionLinks=currentElement.querySelectorAll("a"),accordionLinksLength=accordionLinks.length,j;LBGM.tools.addClass(currentElement,LBGM.accordion.closeClass);currentElement.innerHTML="<div title='"+LBGM.accordion.openText+"' class='icon'></div>"+currentElement.innerHTML;currentElement.querySelector("h3").addEventListener("click",this.accordionAnimationClickEvent,false);currentElement.querySelector(".icon").addEventListener("click",this.accordionAnimationClickEvent,false);for(j=0;j<accordionLinksLength;j++){accordionLinks[j].addEventListener("click",function(e){e.preventDefault();e.stopPropagation();location.href=this.getAttribute("href");},false);}}},accordionAnimationClickEvent:function(e){e.preventDefault();e.stopPropagation();var eventParent=this.parentNode,icon=eventParent.querySelector(".icon");if(LBGM.tools.hasClass(eventParent,LBGM.accordion.closeClass)){LBGM.tools.removeClass(eventParent,LBGM.accordion.closeClass);icon.setAttribute("title",LBGM.accordion.closeText);$(icon).addClass("open");}else{LBGM.tools.addClass(eventParent,LBGM.accordion.closeClass);icon.setAttribute("title",LBGM.accordion.openText);$(icon).removeClass("open");}}};LBGM.showHideInput={init:function(){this.hideClass="hide";this.triggerInputs=document.querySelectorAll(".formFieldEmail input.formEmail");this.triggerInputsLength=this.triggerInputs.length;if(this.triggerInputsLength>0){this.setup();}},setup:function(){var triggerInput,triggerParent,hasError,targetInput,i;for(i=0;i<LBGM.showHideInput.triggerInputsLength;i++){triggerInput=LBGM.showHideInput.triggerInputs[i];triggerParent=triggerInput.parentNode.parentNode;hasError=triggerParent.querySelectorAll("p.formFieldError").length;if(hasError===0){targetInput=triggerParent.querySelector(".formFieldVerification input");targetInput.value=triggerInput.value;triggerInput.setAttribute("data-original-value",triggerInput.value);triggerInput.addEventListener("keyup",function(){LBGM.showHideInput.checkForChange(triggerInput,targetInput);},false);LBGM.showHideInput.hideTargetContainer(targetInput);}}},checkForChange:function(triggerInput,targetInput){if(triggerInput.value===triggerInput.getAttribute("data-original-value")){targetInput.value=triggerInput.getAttribute("data-original-value");LBGM.showHideInput.hideTargetContainer(targetInput);}else{targetInput.value="";LBGM.showHideInput.showTargetContainer(targetInput);}},showTargetContainer:function(targetInput){if(targetInput){LBGM.tools.removeClass(targetInput.parentNode,LBGM.showHideInput.hideClass);}},hideTargetContainer:function(targetInput){if(targetInput){LBGM.tools.addClass(targetInput.parentNode,LBGM.showHideInput.hideClass);}}};LBGM.disableEnableFormFields={init:function(){var checkboxGroups=document.querySelectorAll(".disableEnableCheckbox");var checkbox,checkboxGroup;for(var i=checkboxGroups.length;i--;){checkboxGroup=checkboxGroups[i];checkbox=checkboxGroup.querySelector('input[type="checkbox"]');checkbox.addEventListener("change",function(){LBGM.disableEnableFormFields.setEnabledDisabledStateFromCheckbox(checkbox,checkboxGroup);},false);}this.radioButton=document.querySelectorAll('.radioFieldPanel input[type="radio"]:first-child');this.radioButtonLength=this.radioButton.length;if(this.radioButton.length>1){for(var i=0;i<this.radioButtonLength;i++){if(this.radioButton[i].checked){LBGM.disableEnableFormFields.setEnabledDisabledState(null,this.radioButton[i]);}this.radioButton[i].addEventListener("change",LBGM.disableEnableFormFields.setEnabledDisabledState,false);}}},setEnabledDisabledState:function(e,target){target=target||e.target;for(var i=0;i<LBGM.disableEnableFormFields.radioButtonLength;i++){if(LBGM.disableEnableFormFields.radioButton[i].name===target.name){var fieldParent=LBGM.disableEnableFormFields.radioButton[i].parentNode,fields=fieldParent.querySelectorAll("input, textarea, select"),fieldsLength=fields.length,currentParent=target.parentNode;for(var j=0;j<fieldsLength;j++){if(LBGM.disableEnableFormFields.radioButton[i]!==fields[j]){if(currentParent===fieldParent){fields[j].removeAttribute("disabled");fields[j].style.opacity="1";}else{fields[j].setAttribute("disabled","disabled");fields[j].style.opacity=".75";}}}}}},setEnabledDisabledStateFromCheckbox:function(checkbox,checkboxGroup){var inputs=checkboxGroup.querySelectorAll('input[type="text"]');for(var i=inputs.length;i--;){if(checkbox.checked){inputs[i].setAttribute("disabled","disabled");inputs[i].style.opacity=".75";}else{inputs[i].removeAttribute("disabled");inputs[i].style.opacity="1";}}}};LBGM.submitHandeler={init:function(){if(document.getElementsByClassName("submitAction")[0]!=null&document.getElementsByClassName("submitAction")[0]!=undefined){document.getElementsByClassName("submitAction")[0].addEventListener("click",LBGM.submitHandeler.check,false);}},check:function(e){var isRadioButtonChecked,counter=0;var isAmountFeildempty=true;var valid=false;for(var i=0;i<document.getElementsByClassName("radioOverDraft").length;i++){isRadioButtonChecked=document.getElementsByClassName("radioOverDraft")[i].checked;if(isRadioButtonChecked===true){counter++;}}if(counter>=1){valid=Validation.ValidateRequired(document.getElementsByClassName("required"));if(document.getElementsByClassName("radioOverDraft")[0].checked){if(document.getElementsByClassName("txtOverdraftAmount")[0].value==""){isAmountFeildempty=true;}else{isAmountFeildempty=false;}}else{isAmountFeildempty=false;}}else{Validation.ShowError(document.getElementsByClassName("optionPanel")[0],DI.lang.validation.errors.ValidateRequiredRadio);}if(!valid&&isAmountFeildempty){document.getElementsByClassName("msgError")[0].classList.remove("hide");e.preventDefault();return false;}}};LBGM.autoSelectRadio={init:function(){if(document.getElementById("formAmount")!=null&document.getElementById("formAmount")!=undefined){this.autoTextBox=document.getElementById("formAmount");this.autoTextBox.addEventListener("click",LBGM.autoSelectRadio.autoSelectTextBox,false);}if(document.getElementById("formDateDay")!=null&document.getElementById("formDateDay")!=undefined){this.autoDropDownDay=document.getElementById("formDateDay");this.autoDropDownDay.addEventListener("click",LBGM.autoSelectRadio.autoSelectDropDown,false);}if(document.getElementById("formDateMonth")!=null&document.getElementById("formDateMonth")!=undefined){this.autoDropDownMonth=document.getElementById("formDateMonth");this.autoDropDownMonth.addEventListener("click",LBGM.autoSelectRadio.autoSelectDropDown,false);}if(document.getElementById("formDateYear")!=null&document.getElementById("formDateYear")!=undefined){this.autoDropDownYear=document.getElementById("formDateYear");this.autoDropDownYear.addEventListener("click",LBGM.autoSelectRadio.autoSelectDropDown,false);}},autoSelectTextBox:function(){this.parentNode.firstElementChild.checked=true;},autoSelectDropDown:function(){this.parentElement.parentNode.parentNode.firstElementChild.checked=true;}};LBGM.displayBalance={init:function(){if(document.getElementsByClassName("formAccountTo")[0]!=null&&document.getElementsByClassName("formAccountTo")[0]!=undefined){this.fromAccount=document.getElementsByClassName("formAccountTo")[0];
if(accountDetails&&this.fromAccount){LBGM.displayBalance.showBalance(document.getElementsByClassName("formAccountTo")[0].value);this.fromAccount.addEventListener("change",function(){LBGM.displayBalance.showBalance(document.getElementsByClassName("formAccountTo")[0].value);},false);}}},showBalance:function(val){var dropdownVal=LBGM.displayBalance.populateBalance(accountDetails,val);if(dropdownVal!=undefined){document.getElementsByClassName("accountDetails")[0].style.display="block";document.getElementsByClassName("balanceValue")[0].innerHTML=dropdownVal.balance;document.getElementsByClassName("moneyAvailable")[0].innerHTML=dropdownVal.moneyAvailable;}else{document.getElementsByClassName("accountDetails")[0].style.display="none";document.getElementsByClassName("balanceValue")[0].innerHTML="";document.getElementsByClassName("moneyAvailable")[0].innerHTML="";}},populateBalance:function(accountDetails,val){for(var i in accountDetails){for(var j in accountDetails[i]){if(j===val){var dropdownVal={};dropdownVal.balance=accountDetails[i][j].accountBalance;dropdownVal.moneyAvailable=accountDetails[i][j].availableFunds;return dropdownVal;}}}}};LBGM.usernamePopulator={init:function(){var username_list=document.querySelector(".username-check .suggestions");if(username_list){username_list.onmousedown=function(event){event.preventDefault();var event_target=event?event.target:window.event.srcElement;if(event_target.tagName=="A"){var input_box=document.querySelector("input.userNameSelectToolTarget");input_box.value=event_target.innerHTML;}};}}},LBGM.sectionHotspot={init:function(){this.confirmMessage="";this.promoList=document.querySelectorAll(".compareDetail h3 a, .withImage a img");this.promoListLength=this.promoList.length;if(DI&&DI.lang.compareAndBuy){this.confirmMessage=DI.lang.compareAndBuy.messages.popUpWarn;}this.offerList=document.querySelectorAll(".smartRewardsPanel .hotspot li, .smartRewardsPanel td:nth-child(4)");this.offerListLength=this.offerList.length;if(this.promoListLength>0){for(var i=0;i<this.promoListLength;i++){this.promoList[i].addEventListener("click",LBGM.sectionHotspot.offerActivation,false);}}if(this.offerListLength>0){for(var o=0;o<this.offerListLength;o++){var currentItem=(this.offerList[o].nodeName.toLowerCase()==="td")?this.offerList[o].parentNode:this.offerList[o];currentItem.addEventListener("click",LBGM.sectionHotspot.standardActivation,false);currentItem.setAttribute("data-link-href",this.offerList[o].querySelector("a.moreDetails").getAttribute("href"));}}},offerActivation:function(e){if(window.confirm(LBGM.sectionHotspot.confirmMessage)){window.location=this.querySelector("h3 a").getAttribute("href");}else{e.preventDefault();e.stopPropagation();}},standardActivation:function(e){window.location=this.getAttribute("data-link-href");}};LBGM.desktopLinkPopup={confirmMessage:{},init:function(){var links=document.querySelectorAll(".generic-menu p a.blockLink, .newwin");if(DI){LBGM.desktopLinkPopup.confirmMessage=DI.lang.compareAndBuy.messages.popUpWarn;}else{LBGM.desktopLinkPopup.confirmMessage="";}for(var i=links.length;i--;){links[i].addEventListener("click",LBGM.desktopLinkPopup.link_click,false);}},link_click:function(e){e.preventDefault();return false;if(window.confirm(LBGM.desktopLinkPopup.confirmMessage)){window.open=(this.getAttribute("href"),"_blank");}}};LBGM.frameKill=function(){if(top!==self){top.location.href=self.location.href;}};LBGM.displayVefTransactions={init:function(){var ajaxDataCall=0;var callType="vef";$(".vef-view-funds .vef-get, .vef-view-funds ol li .icon").click(function(e){callType="vef";if(ajaxDataCall===0){ajaxDataCall=1;makeRequest(DI.lang.vef.ajax.url);}e.preventDefault();});$(".vtd-view-pending .vtd-get, .vtd-view-pending ol li .icon").click(function(e){callType="vtd";var cardType="debitCard";var requestURL=DI.lang.vef.ajax.url;if(this.className.indexOf("creditCard")>-1){cardType="creditCard";requestURL=DI.lang.vtdCredit.ajax.pendingurl;}if(ajaxDataCall===0){ajaxDataCall=1;try{makeRequest(requestURL);}catch(e){}}if(typeof dcsMultiTrack!="undefined"&&cardType=="creditCard"){dcsMultiTrack("WT.ac","modules/m342/properties.pm342lnk500c,modules/m342/properties.pm342lnk500c,Pending credit card transactions");}e.preventDefault();});var httpRequest;function makeRequest(url){if(window.XMLHttpRequest){httpRequest=new XMLHttpRequest();}else{if(window.ActiveXObject){try{httpRequest=new ActiveXObject("Msxml2.XMLHTTP");}catch(e){try{httpRequest=new ActiveXObject("Microsoft.XMLHTTP");}catch(e){}}}}if(!httpRequest){return false;}httpRequest.onreadystatechange=responseContents;httpRequest.open("GET",url);httpRequest.send();}function responseContents(){if(httpRequest.readyState===1||httpRequest.readyState===2||httpRequest.readyState===3){if(callType=="vtd"){$(".vtd-statement").html("<img id='vef-loading' class='vef-loading' src='"+DI.lang.vef.ajax.loadingUrl+"' style='display: block; margin:0 auto;' />");}else{$(".vef-statement").html("<img id='vef-loading' class='vef-loading' src='"+DI.lang.vef.ajax.loadingUrl+"' style='display: block; margin:0 auto;' />");}}if(httpRequest.readyState===4){if(httpRequest.status===200){var responseData=httpRequest.responseText;if(responseData.length>0){var delegate=document.createElement("div");delegate.innerHTML=responseData;var vefTransactionsGroup=delegate.getElementsByClassName("vef-transactions");for(var i=0;i<vefTransactionsGroup.length;i++){var paragraphs=vefTransactionsGroup[i].querySelectorAll("p");var className=vefTransactionsGroup[i].className,startVal=className.lastIndexOf("num-rows-"),rowVal=className.substring(startVal),maxTransactions;if(startVal!=-1){if(rowVal.lastIndexOf(" ")!=-1){maxTransactions=rowVal.substring(rowVal.lastIndexOf("-")+1,rowVal.lastIndexOf(" "));}else{maxTransactions=rowVal.substring(rowVal.lastIndexOf("-")+1);}}else{maxTransactions=5;}if(paragraphs.length>maxTransactions){var holder=document.createElement("div");holder.className="hidden-transactions";holder.style.display="none";for(var e=maxTransactions;e<paragraphs.length;e++){holder.appendChild(paragraphs[e]);}vefTransactionsGroup[i].appendChild(holder);var link=(function(target){var link=document.createElement("a");link.href=DI.lang.vef.ajax.offerShowHideUrl;link.className="toggle-hide";link.innerHTML=DI.lang.vef.ajax.messages.showTransactions;return link;})(vefTransactionsGroup[i]);link=vefTransactionsGroup[i].appendChild(link);link.onclick=(function(target){return function(e){var res=target.getElementsByClassName("hidden-transactions")[0];var show=(getComputedStyle(res)||res.style).display=="none";res.style.display=show?"block":"none";this.innerHTML=show?DI.lang.vef.ajax.messages.hideTransactions:DI.lang.vef.ajax.messages.showTransactions;e.preventDefault();};})(vefTransactionsGroup[i]);}}var vefLoadingIcon;while(vefLoadingIcon=document.getElementById("vef-loading")){vefLoadingIcon.parentNode.removeChild(vefLoadingIcon);}if(callType=="vtd"){document.querySelectorAll(".vtd-statement")[0].appendChild(delegate);}else{document.querySelectorAll(".vef-statement")[0].appendChild(delegate);}}}}}}};LBGM.displayTransationDetails={init:function(){var ajaxDataCall=0;$(".vtd-view-detail .vtd-get").click(function(e){var rowidStart=this.className.indexOf("rowid");var cardtypeStart=this.className.indexOf("cardtype");var amountStart=this.className.indexOf("amount");var transactionRefStart=this.className.indexOf("transactionRef");var merchantNameStart=this.className.indexOf("merchantName");var rowidSubstr=this.className.substring(rowidStart);
var cardtypeSubstr=this.className.substring(cardtypeStart);var amountSubstr=this.className.substring(amountStart);var transactionRefSubstr=this.className.substring(transactionRefStart);var merchantNameSubstr=this.className.substring(merchantNameStart);rowidSubstr=rowidSubstr.substring(rowidSubstr.indexOf("'")+1);cardtypeSubstr=cardtypeSubstr.substring(cardtypeSubstr.indexOf("'")+1);amountSubstr=amountSubstr.substring(amountSubstr.indexOf("'")+1);transactionRefSubstr=transactionRefSubstr.substring(transactionRefSubstr.indexOf("'")+1);merchantNameSubstr=merchantNameSubstr.substring(merchantNameSubstr.indexOf("'")+1);var rowid=rowidSubstr.substring(0,rowidSubstr.indexOf("'"));var cardtype=cardtypeSubstr.substring(0,cardtypeSubstr.indexOf("'"));var transAmount=amountSubstr.substring(0,amountSubstr.indexOf("'"));var transactionRef=transactionRefSubstr.substring(0,transactionRefSubstr.indexOf("'"));var merchantName=merchantNameSubstr.substring(0,merchantNameSubstr.indexOf("'"));var requestURL="";if(cardtype=="current"){requestURL=DI.lang.vtdDebit.ajax.detailurl+"?rowid="+rowid+"&cardtype="+cardtype+"&merchantname="+merchantName;}else{if(cardtype=="credit"){requestURL=DI.lang.vtdCredit.ajax.detailurl+"?rowid="+rowid+"&cardtype="+cardtype+"&merchantname="+merchantName;}}var theLastElem=this.parentElement.lastElementChild;if(!theLastElem.ajaxDataCall){theLastElem.ajaxDataCall=0;}if(theLastElem.style.display!="none"){theLastElem.style.display="none";this.classList.add("expandIcon");this.classList.remove("contractIcon");}else{if(theLastElem.ajaxDataCall===0){theLastElem.ajaxDataCall=1;try{makeRequest(requestURL,theLastElem);}catch(e){makeRequest("data/fake-vcd-mobile-data0.html");}theLastElem.style.display="table";this.classList.add("contractIcon");this.classList.remove("expandIcon");}else{theLastElem.style.display="table";this.classList.add("contractIcon");this.classList.remove("expandIcon");}}if(typeof dcsMultiTrack!="undefined"&&theLastElem.style.display=="table"){dcsMultiTrack("WT.ac","xxx TBC","WT.si_n","ViewTransactionDetails","WT.si_x",1,"WT.tx_e","s","WT.pn_sku",cardtype,"WT.tx_s",transAmount,"WT.tx_i",transactionRef,"DCSext.Product",merchantName);}e.preventDefault();});var httpRequest;function makeRequest(url,detailElem){if(window.XMLHttpRequest){httpRequest=new XMLHttpRequest();}else{if(window.ActiveXObject){try{httpRequest=new ActiveXObject("Msxml2.XMLHTTP");}catch(e){try{httpRequest=new ActiveXObject("Microsoft.XMLHTTP");}catch(e){}}}}if(!httpRequest){return false;}httpRequest.onreadystatechange=function(){responseContents(detailElem);};httpRequest.open("GET",url);httpRequest.send();}function responseContents(detailElem){if(httpRequest.readyState===1||httpRequest.readyState===2||httpRequest.readyState===3){}if(httpRequest.readyState===4){if(httpRequest.status===200){var responseData=httpRequest.responseText;if(responseData.length>0){var delegate=document.createElement("div");delegate.style.width="100%";delegate.innerHTML=responseData;var vefTransactionsGroup=delegate.getElementsByClassName("vef-transactions");detailElem.appendChild(delegate);$("a.transQuery",detailElem).click(function(){var analyticsRefStart=this.className.indexOf("analyticsRef");var analyticsRefSubstr=this.className.substring(analyticsRefStart);analyticsRefSubstr=analyticsRefSubstr.substring(analyticsRefSubstr.indexOf("'")+1);var analyticsRef=analyticsRefSubstr.substring(0,analyticsRefSubstr.indexOf("'"));if(typeof dcsMultiTrack!="undefined"){dcsMultiTrack("WT.ac",analyticsRef);}});}}}}}};LBGM.toggleMenu={init:function(){var openClass="open";$(".toggle-header").click(function(e){e.preventDefault();if(LBGM.tools.hasClass(document.getElementById("user-menu"),openClass)){LBGM.tools.removeClass(document.querySelectorAll(".toggle-header")[0],openClass);LBGM.tools.removeClass(document.getElementById("user-menu"),openClass);}else{LBGM.tools.addClass(document.querySelectorAll(".toggle-header")[0],openClass);LBGM.tools.addClass(document.getElementById("user-menu"),openClass);}});}};LBGM.appointmentBookings={init:function(){if(document.querySelector(".oabSwiper")){var labelElements=document.querySelectorAll(".oabSwiper ol li label");for(var i=0;i<labelElements.length;i++){var labeltxt=labelElements[i].innerHTML;var parentLI=labelElements[i].parentNode;var is_radio_selected=parentLI.querySelectorAll("input[type=radio]")[0].checked;var newLink=document.createElement("a");var att=document.createAttribute("href");att.value="#";newLink.setAttributeNode(att);newLink.innerHTML=labeltxt;newLink.onclick=function(e){e.preventDefault();LBGM.appointmentBookings.appointment_time_click_event(this);};if(is_radio_selected){newLink.className="selected";}parentLI.appendChild(newLink);var hider=document.createAttribute("style");hider.value="display:none;";parentLI.querySelectorAll("input[type=radio]")[0].setAttributeNode(hider);hider=document.createAttribute("style");hider.value="display:none;";parentLI.querySelectorAll("label")[0].setAttributeNode(hider);}}},appointment_time_click_event:function(clicked_element){var linkses=document.querySelectorAll(".oabSwiper ol li a");for(var i=0;i<linkses.length;i++){linkses[i].className="";}clicked_element.className="selected";var parental=clicked_element.parentNode;parental.querySelector("input[type=radio]").checked=true;}};LBGM.splitLongTitle={init:function(){var searchString="(Step";var elements=document.querySelectorAll("#headerInner h1");for(var i=0;i<elements.length;i++){if(elements[i].innerHTML.indexOf(searchString)!==-1){elements[i].innerHTML=elements[i].innerHTML.replace("(Step","<br/>(Step");}}}};LBGM.ready=function(){var listeners=[];return{addListener:function(listener){listeners[listeners.length]=listener;},init:function(){var i;for(i=0;i<listeners.length;i++){listeners[i]();}}};}();LBGM.smartRewards=LBGM.smartRewards||{};LBGM.smartRewards.clickableAccountOverview=(function(){function init(){$(".rewardAccountItem").click(function(){$("h2 a",this).click();});}return{init:init};})();LBGM.goAjax={create:function(method,url,loadingFunc,successFunc,failureFunc){return $.ajax({method:method,url:url,loading:loadingFunc,success:successFunc,failure:failureFunc});}};LBGM.serialize={init:function(obj,prefix){return"?"+LBGM.serialize.inner(obj,prefix);},inner:function(obj,prefix){var str=[];for(var p in obj){var k=prefix?prefix+"["+p+"]":p,v=obj[p];str.push(typeof v=="object"?LBGM.serialize.inner(v,k):encodeURIComponent(k)+"="+encodeURIComponent(v));}return str.join("&");}};LBGM.appBanner=function(){var bannerEl;function getOS(){var mobileOS;if(navigator.userAgent.match(/Android/i)!==null){mobileOS="android";}return mobileOS;}function closeBanner(){bannerEl.style.display="none";LBGM.tools.removeClass(document.body,"app-banner-open");}function openBanner(){bannerEl.style.display="block";LBGM.tools.addClass(document.body,"app-banner-open");}function init(){var closeEl;bannerEl=document.querySelectorAll(".app-banner");if(!bannerEl.length){return;}bannerEl=bannerEl[0];closeEl=document.createElement("a");closeEl.className="close";closeEl.title="Hide App Link";closeEl.href="#";closeEl.innerHTML="<span>x</span>";bannerEl.appendChild(closeEl);openBanner();closeEl.addEventListener("click",function(e){e.preventDefault();closeBanner();},false);}return{init:init};}();LBGM.mobileOverlay=function(){var isOpen=false;var overlayBox;var ua=navigator.userAgent;function getOS(){var mobileOS;if(ua.match(/Android/i)!==null){mobileOS="android";}else{if(ua.match(/iPhone/i)!==null){mobileOS="iOS";}else{mobileOS="unknown";
}}return mobileOS;}function doOverlayOpen(){isOpen=true;overlayBox.style.display="block";}function doOverlayClose(){isOpen=false;overlayBox.style.display="none";}function init(){var uaindex,deviceOSver,deviceOS;overlayBox=document.getElementsByClassName("overlayBox")[0];var $closeOverlay=$(".overlayBox .blockLink");var $pageBackground=$("div#outer");var $appBanner=$("div#appbanner");if(!overlayBox){return;}if(getOS()==="android"){uaindex=ua.indexOf("Android");if(uaindex>-1){deviceOSver=ua.substr(uaindex+8,3);deviceOS=deviceOSver.split(".")[0];if(isNaN(deviceOS)){deviceOS=deviceOSver.split(";")[0];}if(Number(deviceOS)>=4){doOverlayOpen();$pageBackground.items[0].style.display="none";$pageBackground.items[0].setAttribute("aria-hidden","true");if($appBanner.items.length!=0){$appBanner.items[0].style.display="none";}}}}if(getOS()==="iOS"){uaindex=ua.indexOf("OS");if(uaindex>-1){deviceOSver=ua.substr(uaindex+3,3).replace("_",".");deviceOS=deviceOSver.split(".")[0];if(Number(deviceOS)>=7){doOverlayOpen();$pageBackground.items[0].style.display="none";$pageBackground.items[0].setAttribute("aria-hidden","true");if($appBanner.items.length!=0){$appBanner.items[0].style.display="none";}}}}$closeOverlay.bind("click",function(e){e.preventDefault();$pageBackground.items[0].style.display="block";doOverlayClose();$pageBackground.items[0].setAttribute("aria-hidden","false");if($appBanner.items.length!=0){$appBanner.items[0].style.display="block";}});}return{init:init};}();LBGM.actionMenu=(function(){function init(element){var actionList=document.querySelectorAll("ul.actionMenuList li").length;var actionMenuListItem=document.getElementsByClassName("actionMenuList")[0];if(actionMenuListItem){var actionHeight=actionMenuListItem.offsetHeight;}var actionMenuView=".viewMoreActions";var actionMenuShow=".viewMoreActions .actionMenuShow";var actionMenuHide=".viewMoreActions .actionMenuHide";var actionMenuHide=".viewMoreActions .actionMenuHide";var clicked=true;var actionCount=2;if(actionList>actionCount){actionMenuListItem.style.height=0;$(actionMenuView).show();}$(actionMenuView).bind("click",function(e){if(clicked){e.preventDefault();$(actionMenuShow).show();$(actionMenuHide).hide();$(".actionMenuList").removeClass("slideupAction").addClass("slidedownAction");actionMenuListItem.style.height=actionHeight+"px";clicked=false;}else{e.preventDefault();$(".actionMenuList").removeClass("slidedownAction").addClass("slideupAction");actionMenuListItem.style.height=0;$(actionMenuShow).hide();$(actionMenuHide).show();clicked=true;}});}return{init:init};})();LBGM.RetailBaselinePJB=(function(){var infoAlertBox=document.getElementsByClassName("infoAlertBox")[0];if(infoAlertBox==null){}else{function get_previoussibling(n){x=n.previousSibling;while(x.nodeType!=1){x=x.previousSibling;}return x;}function getAllElements(parentContainer,reqElement){var matches=[];var searchEles=parentContainer.children;for(var i=0;i<searchEles.length;i++){if(searchEles[i].tagName==reqElement){matches.push(searchEles[i]);}}return matches;}var sort;var sortedSortCode;var sortCodeURL;var sameValue=false;var prevSortCode;var returnedData;var pjbSpinner=document.getElementsByClassName("pjb_spinner")[0];var pjbAjaxError=document.getElementsByClassName("pjb_ajax_error")[0];var pjbMismatchError=document.getElementsByClassName("pjb_mismatch_error")[0];var infoBankName=document.getElementsByClassName("bankNameHere")[0];var sortCodeHolder=get_previoussibling(infoAlertBox);var sortCodeContainer=getAllElements(sortCodeHolder,"INPUT");function init(element){sort=sortCodeContainer;for(var i=0;i<sortCodeContainer.length;i++){sortCodeContainer[i].onblur=blur;}}var blur=function(){for(var i=0;i<sort.length;i++){if((sort[0].value&&sort[1].value&&sort[2].value!=="")&&((sort[0].value).length==2&&(sort[1].value).length==2&&(sort[2].value).length==2)){if(sort[0].value.match(/^\d+$/)&&sort[1].value.match(/^\d+$/)&&sort[2].value.match(/^\d+$/)){sortedSortCode=sort[0].value+sort[1].value+sort[2].value;if(sameValue==false||sortedSortCode!==prevSortCode){prevSortCode=sort[0].value+sort[1].value+sort[2].value;var sortCodeId=DI.lang.baselinePJB.url+"?sortCode="+sortedSortCode;sortCodeURL=sortCodeId;pjbSpinner.style.display="block";pjbAjaxError.style.display="none";pjbMismatchError.style.display="none";loadAJAX();}else{if(sortedSortCode==prevSortCode){pjbAjaxError.style.display="none";pjbMismatchError.style.display="none";infoAlertBox.style.display="block";infoBankName.style.display="block";infoBankName.innerHTML="";infoBankName.innerHTML=returnedData;}}}else{infoAlertBox.style.display="none";}}else{infoAlertBox.style.display="none";pjbAjaxError.style.display="none";pjbMismatchError.style.display="none";}}};var loadAJAX=function(){var xmlhttp;if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest();}else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==XMLHttpRequest.DONE){if(xmlhttp.status==200){returnedData=xmlhttp.responseText;pjbSpinner.style.display="none";pjbAjaxError.style.display="hide";if(xmlhttp.responseText==""||xmlhttp.responseText==undefined){pjbMismatchError.style.display="block";pjbAjaxError.style.display="none";infoAlertBox.style.display="none";}else{if(xmlhttp.responseText=="null"){pjbAjaxError.style.display="block";pjbMismatchError.style.display="none";infoAlertBox.style.display="none";}else{pjbMismatchError.style.display="none";infoAlertBox.style.display="block";infoBankName.style.display="block";infoBankName.innerHTML="";infoBankName.innerHTML=xmlhttp.responseText;sameValue=true;}}}else{if(xmlhttp.status==400){pjbSpinner.style.display="none";pjbAjaxError.style.display="block";pjbMismatchError.style.display="none";}else{pjbSpinner.style.display="none";pjbAjaxError.style.display="block";pjbMismatchError.style.display="none";}}}};xmlhttp.open("GET",sortCodeURL,true);xmlhttp.send();};return{init:init};}})();LBGM.statusToggle=(function(){var setFocusOnTab=false,scrollToThis=false;function hideErrors($element,$this){var $formFields=null;var validationHandler={};if($element.hasClass("formField")){$formFields=$element;}else{$formFields=$element.is("input, select")?$element.parents("div.formField"):$element.find("div.formField");}$formFields.each(function(){var data={};var field=validationHandler.getChild(data[0]);if(field.hideError){field.hideError();}});}function setDisabled($element,isDisabled,clearDisabled){if(!$element.is("input, select")){$element=$element.find("input, select");}$element.each(function(){var $this=$(this);$this[0].disabled=isDisabled;if(isDisabled){$this.addClass("isDisabled");if(clearDisabled||$this.parents().hasClass("otherTitle")){if(!$(".transferBalances .balanceTransferTo").length){$this.val("");}else{$this.filter("input").val("");}}}else{var defaultTextVal=$(this).defaultText;if(typeof defaultTextVal!="undefined"){$this.removeClass("isDisabled").val($(this).defaultText);}else{$this.removeClass("isDisabled");}}if($.browser.safari){$this.css("-webkit-transform","scale(0.9)");setTimeout(function(){$this.css("-webkit-transform","none");},1);}});}function isId(str){return str.substring(1,0)==="#";}function escapeId(id){return id.replace(/:/g,"\\:");}function handleToggle(event){var $this=$(this),meta=($this.is("select"))?$this.find(":selected").metadata():$this.metadata(),$disable,$enable,$hide,$show,$reset,clearDisabled=false;if($this.hasClass("scrollToThis")){scrollToThis=true;}if(meta.disable){$disable=isId(meta.disable)?$(escapeId(meta.disable)):$(meta.disable);
}if(meta.enable){$enable=isId(meta.enable)?$(escapeId(meta.enable)):$(meta.enable);}if(meta.hide){$hide=isId(meta.hide)?$(escapeId(meta.hide)):$(meta.hide);}if(meta.show){$show=isId(meta.show)?$(escapeId(meta.show)):$(meta.show);}if(meta.clearDisabled&&typeof clearDisabled==="boolean"){clearDisabled=meta.clearDisabled;}if(meta.reset){$reset=isId(meta.reset)?$(escapeId(meta.reset)):$(meta.reset);}if(meta.toggleShowHide){var elem=isId(meta.toggleShowHide)?$(escapeId(meta.toggleShowHide)):$(meta.toggleShowHide);var show=$this.is(":checked");if(!elem.is(".statusToggleHide")){show=!show;}if(show){$show=elem;}else{$hide=elem;}}if(meta.toggleAtleastOne&&meta.checkFields){var elem=isId(meta.toggleAtleastOne)?$(escapeId(meta.toggleAtleastOne)):$(meta.toggleAtleastOne);if(meta.secondaryToggle){var secElem=isId(meta.secondaryToggle)?$(escapeId(meta.secondaryToggle)):$(meta.secondaryToggle);}var show=$this.is(":checked");if(!elem.is(".secondaryToggle")){show=!show;}if($(meta.checkFields).find(":checkbox").is(":checked")){$show=elem;if(meta.secondaryToggle){$(secElem).show();$(secElem).find(":checkbox").each(function(){$(this).prop("checked",false);});}if(meta.secondaryToggle&&$this.is(":checked")){$(secElem).show();}else{if(meta.secondaryToggle&&!$this.is(":checked")){$(secElem).hide();}}}else{$hide=elem;if(meta.secondaryToggle){$(secElem).hide();}}}if($this.is(":checkbox, :radio")&&!this.checked){var $temp=$disable;$disable=$enable;$enable=$temp;}if($this.is(":checkbox, :radio, select")||($this.is(":text")&&$this.val()!=="")){if($disable){setDisabled($disable,true,clearDisabled);}if($enable){setDisabled($enable,false,clearDisabled);}}if($this.is(":text")&&$this.val()===""){if($disable){setDisabled($disable,false,clearDisabled);}if($enable){setDisabled($enable,true,clearDisabled);}}if($hide){$hide.hide();if(!$(this).parents(".opsCalculatorTabs").length&&!scrollToThis){$hide.find(":text").val("");}}if($show){var $showHiddenOnly=$show.not(":visible");if($showHiddenOnly.length){$showHiddenOnly.show();}if($reset){if(event){$reset.find("input:radio,input:checkbox").removeAttr("checked");$reset.find("input:text").val("");$reset.find("select").attr("selectedIndex",0);$reset.find(":input").each(function(){this.ready=false;});}}}if($show&&$show.length){if($show.hasClass("fasterPaymentFree")){$hide.find(":radio").removeAttr("checked");$show.find(":radio").eq(0).prop("checked","checked");}else{if($show.hasClass("fasterPaymentCharged")){$hide.find(":radio").removeAttr("checked");$show.find(":radio").eq(1).prop("checked","checked");}else{if($show.hasClass("paymentASAP")){$hide.find(":radio").removeAttr("checked");$show.find(":radio").eq(0).prop("checked","checked");}}}if($show.parent().find(".ops-calculator")){if($show.hasClass("disabledDiv")){$show.find("input").removeAttr("disabled");$show.removeClass("disabledDiv");if($show.find(":table").hasClass("tblOPSQuote")){$show.find(":table").removeClass("tblOPSQuote");$show.find(":table").find("tbody").addClass("tblOPSQuoteEnabled");}if($show.parent().find(".footnote").hasClass("hide-ops-footnote")){$show.parent().find(".footnote").removeClass("hide-ops-footnote");$show.parent().find(".footnote").addClass("show-ops-footnote");}}if($show.hasClass("ops-calculator-monthly")){$("input:hidden[name$=opsPanelUsedHiddenInfo]").val(false);}else{if($show.hasClass("ops-calculator-total")){$("input:hidden[name$=opsPanelUsedHiddenInfo]").val(true);}}}if($show.parent().hasClass("secondaryauthcommercial")){if($show.parent().find(".option0.statusToggleHide").is(":visible")){if($show.parent().find(".option1.statusToggleHide .submitAction").hasClass("submitAction")){$show.parent().find(".option1.statusToggleHide .primaryAction input").removeClass("submitAction");}if($show.parent().find(".option2.statusToggleHide .submitAction").hasClass("submitAction")){$show.parent().find(".option2.statusToggleHide .primaryAction input").removeClass("submitAction");}if(!$show.parent().find(".option0.statusToggleHide .submitAction").hasClass("submitAction")){$show.parent().find(".option0.statusToggleHide .primaryAction input").addClass("submitAction");}}else{if($show.parent().find(".option1.statusToggleHide").is(":visible")){if($show.parent().find(".option0.statusToggleHide .submitAction").hasClass("submitAction")){$show.parent().find(".option0.statusToggleHide .primaryAction input").removeClass("submitAction");}if($show.parent().find(".option2.statusToggleHide .submitAction").hasClass("submitAction")){$show.parent().find(".option2.statusToggleHide .primaryAction input").removeClass("submitAction");}if(!$show.parent().find(".option1.statusToggleHide .submitAction").hasClass("submitAction")){$show.parent().find(".option1.statusToggleHide .primaryAction input").addClass("submitAction");}}else{if($show.parent().find(".option2.statusToggleHide").is(":visible")){if($show.parent().find(".option0.statusToggleHide .submitAction").hasClass("submitAction")){$show.parent().find(".option0.statusToggleHide .primaryAction input").removeClass("submitAction");}if($show.parent().find(".option1.statusToggleHide .submitAction").hasClass("submitAction")){$show.parent().find(".option1.statusToggleHide .primaryAction input").removeClass("submitAction");}if(!$show.parent().find(".option2.statusToggleHide .submitAction").hasClass("submitAction")){$show.parent().find(".option2.statusToggleHide .primaryAction input").addClass("submitAction");}}}}}if($show.parents("fieldset").hasClass("eiaAuth")){var $eiaAuth=$show.parents("fieldset"),$input0=$(".eiaAuth .option0.statusToggleHide .actions input"),$input1=$(".eiaAuth .option1.statusToggleHide .actions input");if($eiaAuth.find(".option0.statusToggleHide").is(":visible")){if($input1.hasClass("submitAction")){$input1.removeClass("submitAction");}if(!$input0.hasClass("submitAction")){$input0.addClass("submitAction");}}else{if($eiaAuth.find(".option1.statusToggleHide").is(":visible")){if($input0.hasClass("submitAction")){$input0.removeClass("submitAction");}if(!$input1.hasClass("submitAction")){$input1.addClass("submitAction");}}}}}if(($.browser.safari===true||$.browser.mozilla===true)&&setFocusOnTab===true){var $allFields=$(".formField");var $index=$allFields.index($this.parents(".formField"));var $nextFormField=$allFields.eq($index+1);var $focus=$nextFormField.find("input, select").eq(0);var $next=$allFields.eq($allFields.index($focus)+1);if($focus.length){if($focus[0].disabled){$next.find("input, select").eq(0).focus();}else{setTimeout(function(){$focus.focus();},5);}}}if(scrollToThis){setTimeout(function(){var moveTo=$this.closest(".radioGroup").offset();$(document).scrollTop(moveTo.top-30);},5);}}function setup(){var $this=$(this);if($this.is(":text")){$this.bind("change keydown keyup",handleToggle).change();}if($this.is("select")){$this.change(handleToggle).change();}else{if($this.is("a")){$this.click(function(e){e.preventDefault();handleToggle.call(this,e);return false;});}else{$this.click(handleToggle);}if(this.checked||$this.is(":checkbox")){handleToggle.call(this);}}if($.browser.safari===true||$.browser.mozilla===true){$this.keydown(function(event){setFocusOnTab=event.shiftKey===false&&event.keyCode===9;});}}return{init:function($context){if(typeof $context==="undefined"||!$context.length){$context=$("body");}$(".statusToggle",$context).each(setup);}};})();LBGM.otherAmountInput={init:function(){var radioMobile2=document.getElementById("frmMakePaymentCreditCard:rdMobilePaycc:2");var radioMobile0=document.getElementById("frmMakePaymentCreditCard:rdMobilePaycc:0");
var radioMobile1=document.getElementById("frmMakePaymentCreditCard:rdMobilePaycc:1");var amountText=document.getElementById("frmMakePaymentCreditCard:formAmount");radioMobile0.checked=false;amountText.disabled=true;radioMobile0.addEventListener("click",this.otherAmountDisable,false);radioMobile1.addEventListener("click",this.otherAmountDisable,false);radioMobile2.addEventListener("click",this.otherAmountDisable,false);},otherAmountDisable:function(e){var radioMobile=document.getElementById("frmMakePaymentCreditCard:rdMobilePaycc:2");var amountText=document.getElementById("frmMakePaymentCreditCard:formAmount");if(!radioMobile.checked){amountText.disabled=true;amountText.value=null;amountText.className="isDisabled";}else{amountText.disabled=false;amountText.className="datatypecurrency";}}};LBGM.inputKeyboard={init:function(){var mpat800=document.querySelectorAll(".mpat-800-input-email input");for(var i=0;i<mpat800.length;i++){mpat800[i].setAttribute("type","email");mpat800[i].setAttribute("autocomplete","on");}var mpat801=document.querySelectorAll(".mpat-801-input-tel input");for(var i=0;i<mpat801.length;i++){mpat801[i].setAttribute("type","tel");mpat801[i].setAttribute("autocomplete","on");}var mpat802=document.querySelectorAll(".mpat-802-input-telext input");for(var i=0;i<mpat802.length;i++){mpat802[i].setAttribute("type","tel");mpat802[i].setAttribute("autocomplete","on");}var mpat808a=document.querySelectorAll(".mpat-808a-input-text input");for(var i=0;i<mpat808a.length;i++){mpat808a[i].setAttribute("autocomplete","off");mpat808a[i].setAttribute("autocorrect","off");mpat808a[i].setAttribute("autocapitalize","off");}var mpat808b=document.querySelectorAll(".mpat-808b-input-text input");for(var i=0;i<mpat808b.length;i++){mpat808b[i].setAttribute("autocorrect","off");mpat808b[i].setAttribute("autocapitalize","on");mpat808b[i].style.textTransform="capitalize";}var mpat808b=document.querySelectorAll(".mpat-808b-input-text.field");for(var i=0;i<mpat808b.length;i++){mpat808b[i].setAttribute("autocorrect","off");mpat808b[i].setAttribute("autocapitalize","on");mpat808b[i].style.textTransform="capitalize";}var mpat808c=document.querySelectorAll(".mpat-808c-input-text input");for(var i=0;i<mpat808c.length;i++){mpat808c[i].setAttribute("autocomplete","off");mpat808c[i].setAttribute("autocorrect","off");mpat808c[i].setAttribute("autocapitalize","on");mpat808c[i].style.textTransform="capitalize";}var mpat808d=document.querySelectorAll(".mpat-808d-input-text input");for(var i=0;i<mpat808d.length;i++){mpat808d[i].setAttribute("autocorrect","off");mpat808d[i].setAttribute("autocapitalize","off");}var mpat808e=document.querySelectorAll(".mpat-808e-input-text input");for(var i=0;i<mpat808e.length;i++){mpat808e[i].setAttribute("autocomplete","off");mpat808e[i].setAttribute("autocorrect","off");mpat808e[i].setAttribute("autocapitalize","off");mpat808e[i].style.textTransform="uppercase";}var mpat808f=document.querySelectorAll(".mpat-808f-input-text input");for(var i=0;i<mpat808f.length;i++){mpat808f[i].setAttribute("autocorrect","off");mpat808f[i].setAttribute("autocapitalize","on");mpat808f[i].style.textTransform="uppercase";}var mpat803=document.querySelectorAll(".mpat-803-input-number input");for(var i=0;i<mpat803.length;i++){mpat803[i].setAttribute("type","number");mpat803[i].setAttribute("step","any");mpat803[i].addEventListener("keydown",function(e){var maxLength=this.getAttribute("maxlength");this.value=this.value.slice(0,maxLength);var charCode=event.which||event.keyCode||event.charCode;if((charCode<47||charCode>57)&&charCode!=190&&charCode!=8&&charCode!=46&&charCode!=13&&charCode!=32&&charCode!=9){e.preventDefault();}if(this.value.length==maxLength&&charCode!=8&&charCode!=13&&charCode!=9){e.preventDefault();}if(charCode==40||charCode==41||charCode==64){e.preventDefault();}if((this.value.indexOf(".")>0&&charCode==190)){e.preventDefault();}},false);mpat803[i].addEventListener("blur",function(e){var a=this;if(a.value!="0"){a.value=a.value.replace(/^0+/,"");}if(a.value.indexOf(".")<0&&a.value!=""){a.value=a.value+".00";}if(a.value<1&&a.value!=""){a.value="0"+a.value;}if(a.value.indexOf(".")<0&&a.value!=""){a.value+=".00";}else{if(a.value!=""){var splitDecimal=a.value.split("."),decimalPlaces="";for(var i=1;i<splitDecimal.length;i++){if(splitDecimal[i]!==""){decimalPlaces=splitDecimal[i];}}if(decimalPlaces.length<2){a.value=a.value+"0";}if(decimalPlaces.length<1){a.value=a.value+"0";}}}},false);}var mpat803a=document.querySelectorAll(".mpat-803a-input-number input");for(var i=0;i<mpat803a.length;i++){mpat803a[i].addEventListener("keydown",function(e){var maxLength=this.getAttribute("maxlength");this.value=this.value.slice(0,maxLength);var charCode=event.which||event.keyCode||event.charCode;if((charCode<47||charCode>57)&&charCode!=190&&charCode!=8&&charCode!=46&&charCode!=13&&charCode!=32&&charCode!=9){e.preventDefault();}if((this.value.indexOf(".")>0&&charCode==190)){e.preventDefault();}},false);mpat803a[i].addEventListener("blur",function(e){var a=this;if(a.value!="0"){a.value=a.value.replace(/^0+/,"");}if(a.value.indexOf(".")<0&&a.value!=""){a.value=a.value+".00";}if(a.value<1&&a.value!=""){a.value="0"+a.value;}if(a.value.indexOf(".")<0&&a.value!=""){a.value+=".00";}else{if(a.value!=""){var splitDecimal=a.value.split("."),decimalPlaces="";for(var i=1;i<splitDecimal.length;i++){if(splitDecimal[i]!==""){decimalPlaces=splitDecimal[i];}}if(decimalPlaces.length<2){a.value=a.value+"0";}if(decimalPlaces.length<1){a.value=a.value+"0";}}}},false);}var mpat804=document.querySelectorAll(".mpat-804-input-number input");for(var i=0;i<mpat804.length;i++){mpat804[i].setAttribute("type","tel");mpat804[i].setAttribute("max","99");mpat804[i].setAttribute("maxlength","2");mpat804[i].setAttribute("tabIndex",i);mpat804[i].addEventListener("keyup",function(e){var maxLength=2;this.value=this.value.slice(0,2);var key=event.which||event.keyCode||event.charCode;if($(this).val().length==maxLength){curIndex=this.tabIndex;if(curIndex<2){mpat804[curIndex+1].focus();}}if((key==8||key==46)){$(this).focus();}},false);mpat804[i].addEventListener("keydown",function(e){var key=event.which||event.keyCode||event.charCode;if((key==8||key==46)&&$(this).val()==""){curIndex=this.tabIndex;if(curIndex>0){mpat804[curIndex-1].focus();}e.preventDefault();}},false);}var mpat805=document.querySelectorAll(".mpat-805-input-number input");for(var i=0;i<mpat805.length;i++){mpat805[i].setAttribute("type","tel");}var mpat809=document.querySelectorAll(".mpat-809-input-number input");for(var i=0;i<mpat809.length;i++){if(!$(mpat809[i]).hasClass("submitAction")){mpat809[i].setAttribute("type","tel");}}}};var mobileType="";var userAgent=navigator.userAgent||navigator.vendor||window.opera;if(/android/i.test(userAgent)){mobileType="Android";}else{if(/iPad|iPhone|iPod/.test(userAgent)&&!window.MSStream){mobileType="iOS";}}if(document.addEventListener){LBGM.browserFeatures.sniff();LBGM.ready.addListener(function(){LBGM.preventDuplicateFormSubmission.init();LBGM.frameKill();if(LBGM.browserFeatures.supported){LBGM.tools.addHasJSClass();LBGM.accordion.init();LBGM.showHideInput.init();LBGM.disableEnableFormFields.init();LBGM.autoSelectRadio.init();LBGM.submitHandeler.init();LBGM.statusToggle.init();LBGM.sectionHotspot.init();LBGM.displayBalance.init();LBGM.toggleMenu.init();window.scrollTo(0,1);LBGM.usernamePopulator.init();LBGM.displayVefTransactions.init();LBGM.displayTransationDetails.init();LBGM.smartRewards.clickableAccountOverview.init();
LBGM.appointmentBookings.init();LBGM.splitLongTitle.init();LBGM.serialize.init();LBGM.actionMenu.init();LBGM.appBanner.init();LBGM.inputKeyboard.init();LBGM.iCCForm.init();LBGM.iCCForm.resetRadioPanal();LBGM.accessibilityLinksFix.init();LBGM.mobileOverlay.init();LBGM.setType.init();LBGM.setNumbersOnly.init();LBGM.otherAmountInput.init();LBGM.emailAccessibilityIssue.init();var infoAlertBox=document.getElementsByClassName("infoAlertBox")[0];if(infoAlertBox==null){}else{LBGM.RetailBaselinePJB.init();}(function(){$(".setupQs").each(function(){var context=this;$(".qSbtBtn",context).hide();var manager=new QuestionManager(context,function(){$(".qSbtBtn",context).show();},{});});})();}var pickAccessibleTabs=document.querySelectorAll(".accessibleTabs");var pickLiAccessibleTabs=document.querySelectorAll(".accessibleTabs li.current");var pickNotCurrent=document.querySelectorAll(".accessibleTabs li");for(var i=0;i<pickAccessibleTabs.length;i++){pickAccessibleTabs[i].setAttribute("role","tablist");}for(var i=0;i<pickLiAccessibleTabs.length;i++){pickLiAccessibleTabs[i].setAttribute("role","tab");pickLiAccessibleTabs[i].setAttribute("aria-selected","true");}if(mobileType==="Android"){var anchor=document.getElementsByTagName("a");for(var i=0;i<pickLiAccessibleTabs.length;i++){var txtForAcc=document.createElement("span");txtForAcc.className+="accessibility-description";txtForAcc.innerHTML+="Tab Selected";pickLiAccessibleTabs[i].append(txtForAcc);}for(var i=0;i<pickNotCurrent.length;i++){if(!$(pickNotCurrent[i]).hasClass("current")){var txtForNotLi=document.createElement("span");txtForNotLi.className+="accessibility-description";txtForNotLi.innerHTML+="Tab";pickNotCurrent[i].querySelector("a").append(txtForNotLi);}}}for(var i=0;i<pickNotCurrent.length;i++){if(!$(pickNotCurrent[i]).hasClass("current")){pickNotCurrent[i].setAttribute("role","tab");pickNotCurrent[i].setAttribute("aria-selected","false");}}});document.addEventListener("DOMContentLoaded",LBGM.ready.init,false);}$(".top-of-page").click(function(e){e.preventDefault();window.scrollTo(500,0);});function gotoTop(){}LBGM.iCCForm={init:function(){if(document.getElementById("txtOverdraftAmount")!=null&document.getElementById("txtOverdraftAmount")!=undefined){document.getElementById("txtOverdraftAmount").addEventListener("focusout",LBGM.iCCForm.check,false);}},check:function(e){if(document.getElementById("txtOverdraftAmount")!=null&document.getElementById("txtOverdraftAmount")!=undefined){Validation.ValidateRequired(document.getElementsByClassName("txtOverdraftAmount"));}},resetRadioPanal:function(){var activities=document.getElementsByName("rdoOverdraft");for(var i=0;i<activities.length;i++){activities[i].addEventListener("click",function(){if(document.getElementsByClassName("txtOverdraftAmountRadio")[0].checked===true){document.getElementsByClassName("txtOverdraftAmount")[0].disabled=false;document.getElementsByClassName("formFieldError")[0].remove();}else{var errLength=document.getElementsByClassName("formFieldError").length;document.getElementsByClassName("txtOverdraftAmount")[0].disabled=true;document.getElementsByClassName("txtOverdraftAmount")[0].value="";if(document.getElementsByClassName("formFieldError")){for(var i=0;i<errLength;i++){document.getElementsByClassName("formFieldError")[0].remove();}}}});}},};LBGM.accessibilityLinksFix={init:function(){if(mobileType==="Android"){var anchor=document.getElementsByTagName("a");for(var i=0;i<anchor.length;i++){if(!$(anchor[i].parentElement.hasAttribute("role"))){anchor[i].innerHTML+="<span class='accessibility-text'> link</span>";}}}}};LBGM.ariaTagMI={init:function(){var memInfo=document.querySelectorAll(".memorableInfo select");var memInfoLen=memInfo.length;for(var i=0;i<memInfoLen;i++){if(memInfo[i].previousElementSibling){var aTagMIText=memInfo[i].previousElementSibling.innerHTML;aTagMIText=aTagMIText.replace(":","");aTagMIText="Please enter "+aTagMIText+" character from your memorable information";memInfo[i].setAttribute("aria-label",aTagMIText);}else{}}}};LBGM.ariaTagMI.init();LBGM.setType={init:function(){$('input[id="frmSetupStandingOrder:strBeneficiaryAccountNumberN"], input[id="frmSetupStandingOrder:strBeneficiarySortCodeN"], input[id="frmSetupStandingOrder:strBeneficiarySortCodeN_p2"], input[id="frmSetupStandingOrder:strBeneficiarySortCodeN_p3"]').each(function(){this.type="tel";});}};LBGM.setNumbersOnly={init:function(){$('input[id="frmSetupStandingOrder:strBeneficiaryAccountNumberN"], input[id="frmSetupStandingOrder:strBeneficiarySortCodeN"], input[id="frmSetupStandingOrder:strBeneficiarySortCodeN_p2"], input[id="frmSetupStandingOrder:strBeneficiarySortCodeN_p3"]').bind("keyup",function(e){this.value=this.value.replace(/[^0-9\.]/g,"");});}};LBGM.emailAccessibilityIssue={init:function(){jQuery(".infoMessageInner .clearfix > span#msgCantDeleteEmail").attr({"aria-live":"assertive","role":"alert"});}};try{LBGM.PCCDCDefectFix={init:function(){$(".datatypeCurrency").blur(function(){var getValue=Number($(this).val()).toFixed(2);$(this).val(getValue);});if($("#frmMakePaymentCreditCard").length){$(".panelTL").addClass("pccdc_journey_makepayment");}}};LBGM.PCCDCDefectFix.init();}catch(err){}function addOption(){var yearElement=document.getElementById("frmPersonalRegistration:formUserDOB.year");if(yearElement){yearElement.value="1965";}}window.onload=addOption();function toggler(e){if(e.innerHTML=="Show"){e.innerHTML="Hide";document.getElementsByClassName("formPassword")[0].type="text";}else{e.innerHTML="Show";document.getElementsByClassName("formPassword")[0].type="password";}}var Validatable=(function($){function validatable(element){for(var prop in this.__proto__){element.__proto__[prop]=this.__proto__[prop];}}validatable.prototype.getValidators=function(){var validators=[];var className=this.className;var matches=null;var re=/validate\-[A-Za-z\-]+/g;while((matches=re.exec(className))!==null){var pieces=matches[0].split("-");var validator="";for(var i=0;i<pieces.length;i++){validator+=pieces[i].charAt(0).toUpperCase()+pieces[i].slice(1);}if(Validatable[validator]){validators.unshift(validator);}}return validators;};validatable.prototype.validate=function(){var elements;if(this instanceof HTMLInputElement||this instanceof HTMLSelectElement||this instanceof HTMLButtonElement){elements=$(this).items;}else{elements=$("input, select, button",this).items;}Validatable.HideError(this);var validators=this.getValidators(),isValid=true;for(var i in validators){if(validators.hasOwnProperty(i)){isValid&=Validatable[validators[i]](elements);}}if(isValid){Validatable.HideError(this);}return isValid;};return validatable;})($);Validatable.ValidateEqual=function(elements){var isValid=true,isThisValid=true;if(elements.length<2){return true;}for(var i=1;i<elements.length;i++){isThisValid=$(elements[i-1]).val()==$(elements[i]).val();if(!isThisValid){Validatable.HideError(elements[i]);Validatable.ShowError(elements[i-1],DI.lang.validation.errors.ValidateEqual);}isValid&=isThisValid;}return isValid;};Validatable.ValidateEmail=function(elements){var isValid=true,isThisValid=true;for(var i=0;i<elements.length;i++){isThisValid=(function(elem){var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(elem.value||false);})(elements[i]);if(!isThisValid){Validatable.HideError(elements[i]);Validatable.ShowError(elements[i],DI.lang.validation.errors.ValidateEmail);}isValid&=isThisValid;
}return isValid;};Validatable.ValidateRequired=function(elements){var isValid=true,isThisValid=true;for(var i=0;i<elements.length;i++){isThisValid=elements[i].value!="";if(!isThisValid){Validatable.HideError(elements[i]);Validatable.ShowError(elements[i],DI.lang.validation.errors.ValidateRequired);}isValid&=isThisValid;}return isValid;};Validatable.ShowError=function(element,message){var html=document.createElement("div");$(html).addClass("errorMessage");html.innerHTML=message;$(element).addClass("error");$(html).insertAfter(element);};Validatable.HideError=function(element){$("input",element).removeClass("error");$("div.errorMessage",element.parentNode).remove();};$(".validate").each(function(){new Validatable(this);});var LBG=(typeof LBG=="undefined")?{}:LBG;LBG.Events=function(){return{listen:function(object,event,handler,scope){handler={func:handler,scope:scope||object};object._events=object._events||{};object._events[event]=object._events[event]||[];object._events[event].push(handler);},trigger:function(object,event,args){var handler;if(object._events&&object._events[event]){if(Object.prototype.toString.call(args)!=="[object Array]"){args=[args];}for(var i=0;i<object._events[event].length;i++){handler=object._events[event][i];handler.func.apply(handler.scope,args);}}}};}();var QuestionSelectors={email:{container:".cpEmail",content:".cpVal"},confirmationEmail:{container:".cpConfirmationEmail",content:".confirmVal"},reenterEmail:{container:".cpReenterEmail",content:".reenterEmailVal"},marketingConsent:{container:".cpMarketingConsent"},content:{container:".qContent",button:".qContent .lnkLev1 a",buttons:".qContent .lnkLev1, .qContent .lnkLev2"},confirmation:{container:".qConfirm",button:".qConfirm .lnkLev1 a"},cancel:{buttons:".qConfirm .lnkLev2 a, .qContent .lnkLev2 a",container:".qNo"},change:{button:".qNo a"},response:{container:".qResponse"},question:{container:".qQuestion"},completed:{button:".qSbtBtn"}},QuestionEvents={hide:"answered",change:"amend"},QuestionState={unanswered:"state-unanswered",confirmation:"state-confirmation",answered:"state-answered",passed:"state-passed",loading:"state-loading"};var Question=(function($,ajax){function question(element,ajaxData){this.element=element;this.ajaxData=ajaxData;this.answered=false;if($(this.element).hasClass(QuestionState.answered)){this._setState(QuestionState.answered);this.answered=true;this._hide();}else{this._setState(QuestionState.unanswered);}this._bind();}question.selectors=QuestionSelectors;question.prototype._bind=function(){var self=this;$(QuestionSelectors.content.button,this.element).click(function(e){e.preventDefault();self._showConfirmation();});$(QuestionSelectors.confirmation.button,this.element).click(function(e){e.preventDefault();if(self._confirm()){self._setState(QuestionState.loading);}});$(QuestionSelectors.cancel.buttons,this.element).click(function(e){e.stopImmediatePropagation();e.preventDefault();self._setState(QuestionState.passed);self._hide();self._hideError();window.scrollTo(0,self.element.offsetTop-20);});$(this.element).click(function(e){if(self.getState()==QuestionState.passed&&!$(self.element).hasClass("open")){e.preventDefault();$(QuestionSelectors.completed.button).hide();self.answered=false;self.previouslyAnswered=true;self._setState(QuestionState.confirmation);$(self.element).trigger(QuestionEvents.change);}});};question.prototype._showContent=function(){$(this.element).addClass("open");};question.prototype._showConfirmation=function(){this._setState(QuestionState.confirmation);};question.prototype._setState=function(state){var cls=this.element.className;cls=cls.replace(/\s*state\-[a-zA-Z0-9\-]+/g,"");this.element.className=cls;$(this.element).addClass(state);};question.prototype._startLoading=function(){this._setState(QuestionState.loading);window.scrollTo(0,this.element.offsetTop-20);LBG.Events.trigger(this,"loading",this);};question.prototype._stopLoading=function(){this._setState(QuestionState.answered);};question.prototype._confirm=function(){var self=this;var isValid=true;$(".validate",self.element).each(function(){isValid&=this.validate();});if(!isValid){this._showError();return;}else{this._hideError();}var formData=this.ajaxData||{};var mdlVal=$(".qSetupMdl",this.element).text();var vidVal=$(".qSetupVid",this.element).text();formData.mdl=mdlVal;formData.vid=vidVal;if($(".state-invalid",this.element).length()>0){$(".state-invalid",this.element).first().focus();return false;}$("input, select",this.element).each(function(){if("radio"!==$(this).attr("type")||this.checked){formData[this.name]=this.value;}});var qUrl=LBGM.serialize.init(formData);this._startLoading();$.ajax({url:DI.lang.setupQs.ajax.url+qUrl,success:function(res){self._stopLoading();$(QuestionSelectors.response.container,self.element).html(res);self._setState(QuestionState.answered);self._hide();},failure:function(){self._stopLoading();$(QuestionSelectors.question.container,self.element).addClass("hide");}});return true;};question.prototype._hide=function(){$(this.element).trigger(QuestionEvents.hide);this.answered=true;this.hide();};question.prototype._showError=function(){var html;if($(".msgError",this.element).items.length==0){html=document.createElement("div");$(html).addClass("msgError");html.innerHTML='<div class="msgTL">'+'<div class="msgTR">'+'<div class="msgBR">'+'<div class="msgBL">'+'<p class="msgP">'+DI.lang.validation.errors.formErrors+"</p>"+"</div>"+"</div>"+"</div>"+"</div>";$(html).insertAfter($("div",this.element).items[0]);}$(".msgError",this.element).items[0].style.display="block";window.scrollTo(0,this.element.offsetTop-20);};question.prototype._hideError=function(){if($(".msgError",this.element).items.length){$(".msgError",this.element).items[0].style.display="none";}};question.prototype.bind=function(evt,handler){$(this.element).bind(evt,handler);return this;};question.prototype.hide=function(){$(this.element).removeClass("open");if(this.previouslyAnswered&&this.getState()!=QuestionState.answered){this._setState(QuestionState.passed);}if(this.getState()==QuestionState.confirmation){if(this.isAnswered()){this._setState(QuestionState.passed);}else{this._setState(QuestionState.unanswered);}}return this;};question.prototype.isAnswered=function(){return this.answered;};question.prototype.getState=function(){for(var key in QuestionState){if(QuestionState.hasOwnProperty(key)){if($(this.element).hasClass(QuestionState[key])){return QuestionState[key];}}}return QuestionState.unanswered;};question.prototype.show=function(){if($(QuestionSelectors.content.container,this.element).exists()){this._showContent();}else{this._showConfirmation();}return this;};return question;})($);var EmailQuestion=(function($,Question){function question(element,ajaxData){var self=this;this.element=element;this.ajaxData=ajaxData;this.answered=false;if($(this.element).hasClass(QuestionState.answered)){this.answered=true;this._setState(QuestionState.answered);this._hide();}else{this._setState(QuestionState.unanswered);}this._bind();var click_handler=function(){LBG.Events.trigger(self,"focus",[self,this]);};var change_handler=function(){LBG.Events.trigger(self,"change",[self,this]);};$("input",this.element).bind("click",click_handler);$("input",this.element).bind("change",change_handler);}question.prototype=Question.prototype;question.prototype._startLoading=function(){this._setState(QuestionState.loading);window.scrollTo(0,this.element.offsetTop-20);LBG.Events.trigger(this,"loading",this);};return question;})($,Question);
var QuestionManager=(function($){var settings={scrollOffset:20};function manager(context,completeCallback,ajaxData){var questions=[],self=this;$(".setupQ",context).each(function(item,i){var questionClass=$(this).hasClass("email-question")?EmailQuestion:Question,obj=new questionClass(this,ajaxData);questions.push(obj);if(questionClass==EmailQuestion){self.emailQuestion_ready(obj);LBG.Events.listen(obj,"focus",self.emailQuestion_focus,self);LBG.Events.listen(obj,"change",self.emailQuestion_change,self);}var scrollToTop=function(){window.scrollTo(0,0);};if(i==0){LBG.Events.listen(obj,"loading",scrollToTop);}else{if(i==$(".setupQ",context).items.length-1){obj.bind("answered",scrollToTop);obj.bind("passed",scrollToTop);}}var scrollToTop=function(){window.scrollTo(0,0);};if(i==0){LBG.Events.listen(obj,"loading",scrollToTop);}else{if(i==$(".setupQ",context).items.length-1){obj.bind("answered",scrollToTop);obj.bind("passed",scrollToTop);}}});$(".setupQs .qNo .change").click(function(){$(".setupQs .qConfirm p.formFieldError").remove();$(".setupQs .qConfirm input").removeClass("error");});if(0==questions.length){return false;}this.completeCallback=completeCallback;this.currentQuestion=-1;this.questions=questions;this.questions.each(function(k){this.bind("answered",function(){self.getNextQuestion();});this.bind("amend",function(){self.currentQuestion=parseInt(k)-1;self.getNextQuestion();});});this.getNextQuestion();}manager.prototype.getNextQuestion=function(){var found=false;while(!found){this.currentQuestion++;if(undefined==this.questions[this.currentQuestion]){break;}if(!this.questions[this.currentQuestion].isAnswered()){found=true;}}for(var key in this.questions){if(this.questions.hasOwnProperty(key)){if(key==this.currentQuestion){this.questions[key].show();}else{this.questions[key].hide();}}}if(!found){this.completeCallback();}return this;};manager.prototype.emailQuestion_ready=function(obj){var emailEl=$(".cpVal",obj.element),confirmEmailEl=$(".cpConfirmationEmail",obj.element),marketingEl=$(".cpMarketingConsent",obj.element),marketingRadioEls=$("input",marketingEl);if(emailEl.items.length&&confirmEmailEl.items.length&&emailEl.items[0].value!=""){confirmEmailEl.hide();$("input",confirmEmailEl).items[0].value=emailEl.items[0].value;if(marketingRadioEls.items.length&&marketingRadioEls.items[0].checked){marketingEl.hide();}}};manager.prototype.emailQuestion_focus=function(obj,el){var marketingEl=$(".cpMarketingConsent",obj.element),marketingRadioEls=$("input",marketingEl);if($(el).hasClass("cpVal")){var is_display_none=$(".cpConfirmationEmail",obj.element).items[0].getAttribute("style");if(is_display_none=="display: none;"){$(".cpConfirmationEmail input",obj.element).items[0].value="";}$(".cpConfirmationEmail",obj.element).show();marketingEl.show();marketingRadioEls.items[0].checked=null;marketingRadioEls.items[1].checked=true;}};manager.prototype.emailQuestion_change=function(obj,el){this.emailQuestion_focus(obj,el);if($(el).hasClass("cpVal")){$(".cpConfirmationEmail input",obj.element).focus();}};return manager;})($);var Validation=(function($){function validation(element){for(var prop in this.__proto__){element.__proto__[prop]=this.__proto__[prop];}}validation.prototype.getValidators=function(){var validators=[];var className=this.className;var matches=null;var re=/validate\-[A-Za-z\-]+/g;while((matches=re.exec(className))!==null){var pieces=matches[0].split("-");var validator="";for(var i=0;i<pieces.length;i++){validator+=pieces[i].charAt(0).toUpperCase()+pieces[i].slice(1);}if(Validation[validator]){validators.unshift(validator);}}return validators;};validation.prototype.validate=function(){var elements;if(this instanceof HTMLInputElement||this instanceof HTMLSelectElement||this instanceof HTMLButtonElement){elements=$(this).items;}else{elements=$("input, select, button, radio",this).items;}Validation.HideErrors(this);var validators=this.getValidators(),isValid=true;for(var i in validators){if(validators.hasOwnProperty(i)){isValid&=Validation[validators[i]](elements);}}if(!isValid){Validation.hideGlobalError(this);Validation.showGlobalError(this,DI.lang.errorMessages.defaultGlobalErrorMessage);}return isValid;};validation.prototype.formSubmitHandler=function(){var self=this,el=this.querySelectorAll(".submitAction"),isValid=0;for(var i=0;i<el.length;i++){$(el[i]).click(function(e){if(!self.validate()){e.preventDefault();e.stopPropagation();}});}};return validation;})($);Validation.ValidateEqual=function(elements){var isValid=true,isThisValid=true;if(elements.length<2){return true;}for(var i=1;i<elements.length;i++){isThisValid=$(elements[i-1]).val()==$(elements[i]).val();if(!isThisValid){Validation.HideError(elements[i]);Validation.ShowError(elements[i],DI.lang.validation.errors.ValidateEqual);}isValid&=isThisValid;}return isValid;};Validation.ValidateEmail=function(elements){var isValid=true,isThisValid=true;for(var i=0;i<elements.length;i++){isThisValid=(function(elem){var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(elem.value||false);})(elements[i]);if(!isThisValid){Validation.HideError(elements[i]);Validation.ShowError(elements[i],DI.lang.validation.errors.ValidateEmail);}isValid&=isThisValid;}return isValid;};Validation.ValidateRequired=function(elements){var isValid=true,isThisValid=true,isRadioChecked,lastRadioEl,firstRadioEl;for(var i=0;i<elements.length;i++){isThisValid=true;firstRadioEl=elements[0];Validation.HideError(elements[i]);if(elements[i].type=="radio"){if(!isRadioChecked){isRadioChecked=elements[i].checked;}lastRadioEl=elements[i];}else{isThisValid=elements[i].value!="";}if(!isThisValid){Validation.ShowError(elements[i],DI.lang.validation.errors.ValidateRequired);}isValid&=isThisValid;}if(isRadioChecked===false){isValid&=isRadioChecked;Validation.ShowError(firstRadioEl,DI.lang.validation.errors.ValidateRequiredRadio);}return isValid;};Validation.showGlobalError=function(element,message){var html=document.createElement("p");$(html).addClass("formSubmitError");html.innerHTML=message;$(html).insertAfter(element.querySelector("p.largerPText"));};Validation.hideGlobalError=function(element){$("p.formSubmitError",element.parentNode).remove();};Validation.ShowError=function(element,message){var html=document.createElement("p");$(html).addClass("formFieldError");html.innerHTML=message;$(element).addClass("error");$(html).insertBefore(element);};Validation.HideError=function(element){$("input",element).removeClass("error");$("p.formFieldError",element.parentNode).remove();};Validation.HideErrors=function(element){$("input",element).removeClass("error");$("p.formFieldError",element).remove();};$(".validate").each(function(){var validation=new Validation(this);validation.formSubmitHandler.call(this);});(function(){var initializing=false,fnTest=/xyz/.test(function(){xyz;})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(prop){var _super=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){prototype[name]=typeof prop[name]=="function"&&typeof _super[name]=="function"&&fnTest.test(prop[name])?(function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);this._super=tmp;return ret;};})(name,prop[name]):prop[name];}function Class(){if(!initializing&&this.init){this.init.apply(this,arguments);}}Class.prototype=prototype;
Class.prototype.constructor=Class;Class.extend=arguments.callee;return Class;};})();